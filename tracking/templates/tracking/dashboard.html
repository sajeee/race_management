{% load static %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{{ race.name }} ‚Äî Live Race Dashboard</title>
  <link rel="stylesheet" href="{% static 'tracking/css/styles.css' %}">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <style>
    body { font-family: "Segoe UI", Arial, sans-serif; margin:0; background:#f7f7f9; }
    header { background:#1a73e8; color:white; padding:12px 20px; }
    header h1 { margin:0; font-size:1.3rem; }
    main { display:flex; gap:16px; padding:16px; }
    #map { flex:1; height:80vh; border-radius:10px; }
    #sidebar { width:380px; background:white; padding:12px; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.08); }
    table { width:100%; border-collapse:collapse; font-size:14px; }
    th, td { text-align:center; padding:6px; border-bottom:1px solid #eee; }
    thead { background:#fafafa; }
    @media (max-width:900px) { main { flex-direction:column; } #sidebar { width:100%; } }
  </style>
</head>
<body>
  <header>
    <h1>{{ race.name }} ‚Äî Live Dashboard</h1>
  </header>

  <main>
    <div id="map"></div>

    <aside id="sidebar">
      <h3 style="text-align:center;">üèÅ Leaderboard</h3>
      <table id="leaderboard">
        <thead>
          <tr>
            <th>#</th>
            <th>Bib</th>
            <th>Name</th>
            <th>Dist (m)</th>
            <th>Pace (min/km)</th>
            <th>Speed (km/h)</th>
            <th>Last</th>
          </tr>
        </thead>
        <tbody>
          <tr><td colspan="7" style="text-align:center;">Loading...</td></tr>
        </tbody>
      </table>
    </aside>
  </main>

  <script>window.RACE_ID = {{ race.id }};</script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="{% static 'tracking/js/dashboard.js' %}"></script>
</body>
</html>
